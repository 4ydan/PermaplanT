# Meeting 2023-04-27 DB

_Protocolled by: ?_

## Attendees

- Moritz
- Thorben
- Ramzan
- Luciano
- Markus
- Yvonne
- (everyone on the mailing list is welcomed)

## Preparations

1. add yourself in https://nextcloud.markus-raab.org/nextcloud/index.php/apps/polls/vote/16
2. add previous outcomes
3. add questions for Luciano

## Previous outcomes

- Canvas has cartesian coordinate system
- We use 3D geometry, z-value is 0 if no height given
- The user draws a polygon to define the size of the map

**Please add relevant outcomes (what we already know)**

## Questions

- [ ] Which coordinate system do we use?
  - [ ] real-world longitude and latitude?
  - [ ] what if user does not want to give longitude and latitude?
  - [ ] how to performantly transform to cartesian coordinate system?
- [ ] How to store coordinates in the database?
  - [ ] allow different coordinate systems?
  - [ ] store both real-world and cartesian for performance?
- [ ] 5D mapping? How to efficiently select for time+alternatives?
- [ ] geo referencing with ST_SetGeoReference?
- [ ] Rastering for rain, sun, etc?
- [ ] Does the size of the map need to be static?
- [ ] PostGIS computation/algorithms?

**Please add further questions to Luciano**

Example query:

```
CREATE TABLE geometries (name varchar, geom geometry);

INSERT INTO geometries VALUES ('Point', 'POINT(0 0)'),
('Linestring', 'LINESTRING(0 0, 1 1, 2 1, 2 2)'),
('Polygon', 'POLYGON((0 0, 1 0, 1 1, 0 1, 0 0))'),
('PolygonWithHole', 'POLYGON((0 0, 10 0, 10 10, 0 10, 0 0),(1 1, 1 2, 2 2, 2 1, 1 1))'),
('Collection', 'GEOMETRYCOLLECTION(POINT(2 0),POLYGON((0 0, 1 0, 1 1, 0 1, 0 0)))');

SELECT name, ST_AsText(geom) FROM geometries;
```

## Agenda

- start
- protocol
- welcome ☺️
- maybe Moritz shows current status?
- DB Design
- answer/discuss questions
- who wants to work on which task?

## Notes

- Thorben presented the map
  - re-check the requirements
- coordinates in the database
  - can use different coordinate systems. but costly
  - kepler.gl can use lang/lat coordinate systems
  - LeafletJS
  - KonvaJS
- cartesian vs lang/lat coordinates
- balance between separate tables for each canvas object in the database vs. one table for the whole map as a stringified JSON
- PostGIS can store raster information in the database
  - user can brush to draw raster areas
